# 2023.1.17实验记录

使用历史数据进行划分，在新数据上进行模拟测试， 分别测试在完整数据上划分，仅在前一步（10个区块）的数据上划分，在前100步（1000个区块）上划分，和在所有历史数据上划分的效果。  
数据使用loader.load_data(start_time='2021-08-01 00:00:00')  

## 实验结果 Metis

实验配置：{'n_shards': 8, 'blocks_per_epoch': 10, 'tx_rate': 100, 'tx_per_block': 200, 'block_interval': 15, 'simulate_time': 59400, 'n_block': 31680, 'target_n_block': 31680.0, 'n_tx': 5933842, 'n_inner_tx': 4841382, 'n_cross_tx': 1092460, 'prop_cross_tx': 0.18410668838165897, 'n_block_tx': 6284904, 'n_block_out_tx': 960060, 'n_block_forward_tx': 959790, 'n_block_inner_tx': 4365054, 'throughput': 105.80646464646465, 'actual_throughput': 89.64383838383839, 'target_throughput': 106.66666666666667, 'tx_pool_length': [30461, 94603, 55022, 131452, 122318, 136310, 15075, 23487], 'tx_forward_length': [14, 33, 39, 43, 80, 40, 15, 6], 'n_wasted': 51096, 'tx_wasted': [23145, 1676, 440, 590, 5476, 37, 2981, 16751], 'prop_wasted': 0.008064393939393939, 'prop_throughput': 0.8404109848484849}  

|分组数量|跨片交易比例|实际吞吐量|
|:-----:|:---------:|:-------:|
|不做划分|0.8544282102556826|57.01570707070707|
|Parts-1844520-All|0.18410668838165897|89.64383838383839|
|Parts-Last10|0.720449246879172|61.95446127946128|
|Parts-Last1000|0.5319774271037213|69.06301346801347|
|Parts-LastAll|0.5048398659755349|69.93688552188553|
|GroupParts-128-All|0.8167960993905803|58.70047138047138|
|GroupParts-128-Last10|0.8196129927288256|58.58222222222222|
|PopularParts-128-All|0.4262307624638472|74.85616161616161|
|PopularParts-128-Last10|0.789099878291333|59.595|
|PopularParts-128-Last1000|0.6732782908611318|63.353316498316495|

其中Parts-1844520-All表示在所有数据上(1844520是账户总数)划分并测试，Parts-Last10表示每一步都是在过去10个区块的数据上划分并在接下来10个区块上测试，Parts-Last1000表示每一步都是在过去1000个区块数据上划分并在接下来10个区块上测试，Parts-LastAll表示每一步都是在过去所有数据上划分并在接下来10个区块上测试。
GroupParts-128-All表示按地址分成128组后在所有数据上划分，GroupParts-128-Last10表示在过去10个区块数据上划分。
PopularParts-128-All表示按热门地址分成128组后在所有数据上划分，PopularParts-128-Last10则表示在过去10个区块数据上划分。

可以看到，相较于在所有数据上划分而言，在历史数据上划分并在新数据上测试所得到的效果有所降低。
