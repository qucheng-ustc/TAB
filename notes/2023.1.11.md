# 2023.1.11实验记录

数据使用loader.load_data(start_time='2021-08-01 00:00:00')



## 不同分组数量情况下METIS划分效果

`python test_graph.py`  
配置：
{'n_shards': 8, 'blocks_per_epoch': 10, 'tx_rate': 100, 'tx_per_block': 200, 'block_interval': 15, 'simulate_time': 59400, 'n_block': 31680, 'target_n_block': 31680.0, 'n_tx': 5933842, 'n_inner_tx': 4841382, 'n_cross_tx': 1092460, 'prop_cross_tx': 0.18410668838165897, 'n_block_tx': 6284904, 'n_block_out_tx': 960060, 'n_block_forward_tx': 959790, 'n_block_inner_tx': 4365054, 'throughput': 105.80646464646465, 'actual_throughput': 89.64383838383839, 'target_throughput': 106.66666666666667, 'tx_pool_length': [30461, 94603, 55022, 131452, 122318, 136310, 15075, 23487], 'tx_forward_length': [14, 33, 39, 43, 80, 40, 15, 6], 'n_wasted': 51096, 'tx_wasted': [23145, 1676, 440, 590, 5476, 37, 2981, 16751], 'prop_wasted': 0.008064393939393939, 'prop_throughput': 0.8404109848484849}  

|分组数量|跨片交易比例|实际吞吐量|
|:-----:|:---------:|:-------:|
|不做划分|0.8544282102556826|57.01570707070707|
|Parts-1844520|0.18410668838165897|89.64383838383839|
|GroupParts-128|0.8167960993905803|58.70047138047138|
|GroupParts-256|0.8020700584882442|59.197643097643095|
|GroupParts-512|0.7921410782423933|59.513282828282826|
|GroupParts-1024|0.773515877234345|60.218198653198655|
|GroupParts-2048|0.7556436453818622|60.87404040404041|
|GroupParts-4096|0.7463110746797774|61.109410774410776|
|GroupParts-8192|0.722223308271437|61.9787037037037|
|GroupParts-16384|0.7061049148258414|62.51925925925926|
|GroupParts-32768|OOM|OOM|
|GroupParts-65536|OOM|OOM|

结论：分组数量影响了划分效果，但是效果随分组数量的增加而增加的程度近似成对数关系，且与最优的划分差距较大，分组数量过多时邻接矩阵过大导致内存溢出（16G），因此通过增加分组数量来提升效果并不可行